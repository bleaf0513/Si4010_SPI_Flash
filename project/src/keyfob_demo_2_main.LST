C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE KEYFOB_DEMO_2_MAIN
OBJECT MODULE PLACED IN keyfob_demo_2_main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.exe keyfob_demo_2_main.c DB OE BR BROWSE NOAREGS NOINTPROMOTE DEBUG OBJECTEXTEN
                    -D CODE SYMBOLS INCDIR(..\src;..\..\common\src;c:\SiLabs\MCU\Inc)

line level    source

   1          /*------------------------------------------------------------------------------
   2           * Silicon Laboratories, Inc.
   3           * Si4010 RevC
   4           * Toolchain: Keil C51
   5           * Bit-banged SPI Flash Read (CMD 0x03)
   6           *------------------------------------------------------------------------------*/
   7          
   8          #include <intrins.h>
   9          #include "stdlib.h"
  10          #include "si4010.h"
  11          #include "si4010_api_rom.h"
  12          #include "keyfob_demo_2.h"
  13          
  14          /*------------------------------------------------------------------------------
  15           * TYPE DEFINITIONS (Keil-safe)
  16           *------------------------------------------------------------------------------*/
  17          
  18          
  19          /*------------------------------------------------------------------------------
  20           * GPIO DEFINITIONS
  21           *------------------------------------------------------------------------------*/
  22          sbit MY_LED    = P0^4;
  23          
  24          /* SPI FLASH (bit-banged) */
  25          sbit SPI_CS    = P1^1;   /* GPIO9  */
  26          sbit SPI_CLK   = P0^6;   /* GPIO6  */
  27          sbit SPI_MOSI  = P1^0;   /* GPIO8  */
  28          sbit SPI_MISO  = P0^7;   /* GPIO7  */
  29          
  30          /*------------------------------------------------------------------------------
  31           * SPI LOW-LEVEL SUPPORT
  32           *------------------------------------------------------------------------------*/
  33          void spi_delay(void)
  34          {
  35   1          _nop_();
  36   1          _nop_();
  37   1      }
  38          
  39          /*------------------------------------------------------------------------------
  40           * SPI WRITE BYTE (MSB first)
  41           *------------------------------------------------------------------------------*/
  42          void spi_write_byte(BYTE _data)
  43          {
  44   1          BYTE i;
  45   1      
  46   1          for (i = 0; i < 8; i++)
  47   1          {
  48   2              SPI_MOSI = (_data & 0x80) ? 1 : 0;
  49   2              _data <<= 1;
  50   2      
  51   2              SPI_CLK = 1;
  52   2              spi_delay();
  53   2              SPI_CLK = 0;
  54   2              spi_delay();
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 2   

  55   2          }
  56   1      }
  57          
  58          /*------------------------------------------------------------------------------
  59           * SPI READ BYTE (MSB first)
  60           *------------------------------------------------------------------------------*/
  61          BYTE spi_read_byte(void)
  62          {
  63   1          BYTE i;
  64   1          BYTE _data = 0;
  65   1      
  66   1          for (i = 0; i < 8; i++)
  67   1          {
  68   2              _data <<= 1;
  69   2      
  70   2              SPI_CLK = 1;
  71   2              spi_delay();
  72   2              if (SPI_MISO)
  73   2                  _data |= 1;
  74   2              SPI_CLK = 0;
  75   2              spi_delay();
  76   2          }
  77   1          return _data;
  78   1      }
  79          
  80          /*------------------------------------------------------------------------------
  81           * SPI FLASH READ (CMD = 0x03)
  82           *------------------------------------------------------------------------------*/
  83          void spi_flash_read(LWORD    addr, BYTE *buf, BYTE len)
  84          {
  85   1          BYTE i;
  86   1      
  87   1          SPI_CS = 0;
  88   1      
  89   1          spi_write_byte(0x03);                 /* READ command */
  90   1          spi_write_byte((BYTE)(addr >> 16));   /* A23..A16 */
  91   1          spi_write_byte((BYTE)(addr >> 8));    /* A15..A8  */
  92   1          spi_write_byte((BYTE)(addr));         /* A7..A0   */
  93   1      
  94   1          for (i = 0; i < len; i++)
  95   1              buf[i] = spi_read_byte();
  96   1      
  97   1          SPI_CS = 1;
  98   1      }
  99          
 100          /*------------------------------------------------------------------------------
 101           * READ FREQUENCY FROM FLASH @ 0x000000
 102           * Stored as LITTLE-ENDIAN DWORD
 103           *------------------------------------------------------------------------------*/
 104          float spi_flash_read_freq(void)
 105          {
 106   1          BYTE  b[4];
 107   1         // LWORD f;
 108   1      
 109   1          spi_flash_read(0x000000UL, b, 4);
 110   1      
 111   1         // f  = ((LWORD)b[3] << 24);
 112   1        //  f |= ((LWORD)b[2] << 16);
 113   1        //  f |= ((LWORD)b[1] << 8);
 114   1        //  f |=  (LWORD)b[0];
 115   1      if(b[0]==0x74 && b[1]==0xFA && b[2]==0xC4 && b[3]==0x7A)
 116   1      {
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 3   

 117   2              return 316703093.0;
 118   2      }
 119   1      else if(b[0]==0x74 && b[1]==0xFA && b[2]==0xC4 && b[3]==0x7A)
 120   1      return 433979050.0;
 121   1      
 122   1        //  return f;
 123   1      }
 124          
 125          /*------------------------------------------------------------------------------
 126           * MAIN
 127           *------------------------------------------------------------------------------*/
 128          void main(void)
 129          {
 130   1          LWORD fFlashFreqHz;
 131   1      
 132   1          /* Basic system init */
 133   1          PDMD = 1;
 134   1          PORT_CTRL &= ~(M_PORT_MATRIX | M_PORT_ROFF | M_PORT_STROBE);
 135   1              PORT_CTRL |=  M_PORT_STROBE;
 136   1              PORT_CTRL &= (~M_PORT_STROBE);
 137   1          GPIO_LED = 0;
 138   1      
 139   1          vSys_Setup(10);
 140   1          vSys_SetMasterTime(0);
 141   1          vSys_BandGapLdo(1);
 142   1      
 143   1              if ((PROT0_CTRL & M_NVM_BLOWN) > 1) //if part is burned to user or run mode.
 144   1              {
 145   2                      // Check the first power up bit meaning keyfob is powered on by battery insertion
 146   2                      if ( 0 != (SYSGEN & M_POWER_1ST_TIME) )
 147   2                      {
 148   3                              vSys_FirstPowerUp(); // Function will shutdown.
 149   3                      }
 150   2              }
 151   1          vSys_LedIntensity(3);
 152   1          lLEDOnTime = 20;
 153   1          lPartID = lSys_GetProdId();
 154   1          bIsr_DebounceCount = 0;
 155   1      
 156   1          /* Button setup */
 157   1          rBsrSetup.bButtonMask = bButtonMask_c;
 158   1          rBsrSetup.pbPtsReserveHead = abBsrPtsPlaceHolder;
 159   1          rBsrSetup.bPtsSize = 3;
 160   1          rBsrSetup.bPushQualThresh = 3;
 161   1          vBsr_Setup(&rBsrSetup);
 162   1      
 163   1          RTC_CTRL = (0x07 << B_RTC_DIV) | M_RTC_CLR;
 164   1          RTC_CTRL |= M_RTC_ENA;
 165   1          ERTC = 1;
 166   1          EA = 1;
 167   1      
 168   1          /* ---------- FLASH FREQUENCY READ ---------- */
 169   1          fFlashFreqHz = spi_flash_read_freq();
 170   1      
 171   1        //  if (fFlashFreqHz < 300000000UL || fFlashFreqHz > 350000000UL)
 172   1        //      fFlashFreqHz = 315000000UL;   /* Safe fallback */
 173   1      //fFlashFreqHz;
 174   1          fDesiredFreqOOK =fFlashFreqHz; //(float)f_315_RkeFreqOOK_c;
 175   1          fDesiredFreqFSK =fFlashFreqHz;// (float)f_315_RkeFreqFSK_c;
 176   1      
 177   1          bFskDev = b_315_RkeFskDev_c;
 178   1      
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 4   

 179   1          /* PA setup */
 180   1          rPaSetup.bLevel      = b_315_PaLevel_c;
 181   1          rPaSetup.wNominalCap = b_315_PaNominalCap_c;
 182   1          rPaSetup.bMaxDrv     = b_315_PaMaxDrv_c;
 183   1              rPaSetup.fAlpha      = 0.0;
 184   1              rPaSetup.fBeta       = 0.0;
 185   1          vPa_Setup(&rPaSetup);
 186   1      
 187   1      #ifdef OOK
                  rOdsSetup.bModulationType = bModOOK_c;
                  vStl_EncodeSetup(bEncodeManchester_c, NULL);
                  fDesiredFreq = fDesiredFreqOOK;
                  bPreamble = bPreambleManch_c;
              #else
 193   1          rOdsSetup.bModulationType = bModFSK_c;
 194   1      vStl_EncodeSetup( bEnc_NoneNrz_c, NULL );
 195   1          fDesiredFreq = fDesiredFreqFSK;
 196   1          bPreamble = bPreambleNrz_c;
 197   1      #endif
 198   1      
 199   1          rOdsSetup.bGroupWidth = 7;
 200   1          rOdsSetup.bClkDiv = 5;
 201   1          rOdsSetup.bEdgeRate = 0;
 202   1          rOdsSetup.bLcWarmInt = 0;
 203   1          rOdsSetup.bDivWarmInt = 5;
 204   1          rOdsSetup.bPaWarmInt = 4;
 205   1          rOdsSetup.wBitRate = 417;
 206   1          vOds_Setup(&rOdsSetup);
 207   1      
 208   1          vFCast_Setup();
 209   1      
 210   1          iBatteryMv = iMVdd_Measure(bBatteryWait_c);
 211   1      if (iBatteryMv < iLowBatMv_c) 
 212   1      {
 213   2              bBatStatus = 0;
 214   2      }
 215   1      else
 216   1      {
 217   2              bBatStatus = 1;
 218   2      }
 219   1          vDmdTs_RunForTemp(3);
 220   1      while ( 0 == bDmdTs_GetSamplesTaken() )
 221   1      {
 222   2              //wait
 223   2      }
 224   1      
 225   1          /* ---------- MAIN LOOP ---------- */
 226   1          while (1)
 227   1          {
 228   2              vButtonCheck();
 229   2              MY_LED = 1;
 230   2      
 231   2              if (bButtonState)
 232   2              {
 233   3                  MY_LED = 0;
 234   3                  bRepeatCount = bRepeatCount_c;
 235   3                  vRepeatTxLoop();
 236   3              }
 237   2              else if ((lSys_GetMasterTime() >> 5) > bMaxWaitForPush_c)
 238   2              {
 239   3                      if ((PROT0_CTRL & M_NVM_BLOWN) > 1) //if part is burned to user or run mode.
 240   3                      {
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 5   

 241   4                              //Disable all interrupts
 242   4                              EA = 0;
 243   4      #ifdef CRYSTAL
                                      // Disable XO
                                      bXO_CTRL = 0 ;          
                                      // Wait 20us for XO to stop
                                      vSys_16BitDecLoop( 20 );
              #endif
 249   4                              // Shutdown
 250   4                              vSys_Shutdown();        
 251   4                      }
 252   3          }
 253   2        }
 254   1      }
 255          
 256          /*------------------------------------------------------------------------------
 257           * RTC INTERRUPT
 258           *------------------------------------------------------------------------------*/
 259          void vRepeatTxLoop (void)
 260          
 261          { 
 262   1      
 263   1              vFCast_Tune( fDesiredFreq );
 264   1              if (rOdsSetup.bModulationType == bModFSK_c)
 265   1              {
 266   2                      vFCast_FskAdj( bFskDev ); 
 267   2              }
 268   1              // Wait until there is a temperature sample available
 269   1              while ( 0 == bDmdTs_GetSamplesTaken() )
 270   1              {
 271   2                      //wait
 272   2              }
 273   1              //  Tune the PA with the temperature as an argument 
 274   1              vPa_Tune( iDmdTs_GetLatestTemp());
 275   1              vPacketAssemble();
 276   1              //Convert whole frame before transmission 
 277   1              vConvertPacket(rOdsSetup.bModulationType);
 278   1              vStl_PreLoop();
 279   1              do
 280   1              {
 281   2                      // get current timestamp  
 282   2                      lTimestamp = lSys_GetMasterTime();
 283   2                      //if part is burned to user or run mode
 284   2                      if ((PROT0_CTRL & M_NVM_BLOWN) > 1) 
 285   2                      {
 286   3                              //turn LED on
 287   3                             // MY_LED = 0; 
 288   3                      }              
 289   2                      while ( (lSys_GetMasterTime() - lTimestamp) < lLEDOnTime )
 290   2                      {
 291   3                              //wait for LED ON time to expire
 292   3                      }
 293   2                    //  MY_LED = 1;  //turn LED off
 294   2                      //Transmit packet
 295   2                      vStl_SingleTxLoop(pbFrameHead,bFrameSize);
 296   2                      // Wait repeat interval. 
 297   2                      while ( (lSys_GetMasterTime() - lTimestamp) < wRepeatInterval_c );
 298   2      
 299   2              }while(--bRepeatCount);
 300   1      
 301   1              vStl_PostLoop();
 302   1      
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 6   

 303   1               // Clear time value for next button push detecting. 
 304   1              vSys_SetMasterTime(0);
 305   1      
 306   1              return;
 307   1      } 
 308          
 309          void isr_rtc(void) interrupt INTERRUPT_RTC using 1
 310          {
 311   1          RTC_CTRL &= ~M_RTC_INT;
 312   1          vSys_IncMasterTime(5);
 313   1          bIsr_DebounceCount++;
 314   1        if ((bIsr_DebounceCount % bDebounceInterval_c) == 0)
 315   1        {
 316   2          vBsr_Service();
 317   2        }
 318   1        return;
 319   1      }
 320          
 321          /*------------------------------------------------------------------------------
 322           * BUTTON CHECK
 323           *------------------------------------------------------------------------------*/
 324          void vButtonCheck(void)
 325          {
 326   1          ERTC = 0;
 327   1          bButtonState = 0;
 328   1      
 329   1          if (bBsr_GetPtsItemCnt())
 330   1          {
 331   2              bButtonState = wBsr_Pop() & 0xFF;
 332   2      
 333   2              if (bPrevBtn)
 334   2              {
 335   3                  bPrevBtn = bButtonState;
 336   3                  bButtonState = 0;
 337   3              }
 338   2              else
 339   2              {
 340   3                  bPrevBtn = bButtonState;
 341   3              }
 342   2          }
 343   1      
 344   1          ERTC = 1;
 345   1        return;
 346   1      }
 347          void vPacketAssemble (void)
 348          { 
 349   1        BYTE i;
 350   1      
 351   1        pbFrameHead = abFrame ;
 352   1        bFrameSize = bFrameSize_c;
 353   1      
 354   1      
 355   1        for (i=0;i<bPreambleSize_c;i++)
 356   1        {
 357   2              abFrame[i] = bPreamble;
 358   2        }
 359   1      //clear button bits in bStatus
 360   1              bStatus &= ~M_ButtonBits_c;
 361   1      //copy button bits from bButtonState to bStatus
 362   1              bStatus |= bButtonState & M_ButtonBits_c;
 363   1      
 364   1              abFrame[bFrameSize_c - 11] = bSync1_c;
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 7   

 365   1              abFrame[bFrameSize_c - 10] = bSync2_c;
 366   1              abFrame[bFrameSize_c - 9] = ((BYTE *)&lPartID)[0];
 367   1              abFrame[bFrameSize_c - 8] = ((BYTE *)&lPartID)[1];
 368   1              abFrame[bFrameSize_c - 7] = ((BYTE *)&lPartID)[2];
 369   1              abFrame[bFrameSize_c - 6] = ((BYTE *)&lPartID)[3];
 370   1              abFrame[bFrameSize_c - 5] = bStatus;
 371   1              abFrame[bFrameSize_c - 4] = ((BYTE *)&iBatteryMv)[0];
 372   1              abFrame[bFrameSize_c - 3] = ((BYTE *)&iBatteryMv)[1];
 373   1              abFrame[bFrameSize_c - 2] = 0;  //CRC
 374   1              abFrame[bFrameSize_c - 1] = 0;  //CRC
 375   1      
 376   1              vCalculateCrc();
 377   1      
 378   1      
 379   1        return;
 380   1      }
 381          //--------------------------------------------------------------
 382          //Calculate CRC and write in the frame buffer
 383          //Bit pattern used (1)1000 0000 0000 0101, X16+X15+X2+1
 384          void vCalculateCrc(void)
 385          {
 386   1              BYTE i,j;
 387   1              WORD wCrc;
 388   1              wCrc = 0xffff;
 389   1              for(j = bPayloadStartIndex_c;j<bPayloadStartIndex_c + bPayloadSize_c;j++)
 390   1              {
 391   2                      wCrc = wCrc ^ ((WORD)abFrame[j]<<8);
 392   2      
 393   2                      for (i = 8; i != 0; i--)
 394   2                      {
 395   3                              if (wCrc & 0x8000)
 396   3                              {
 397   4                                      wCrc = (wCrc << 1) ^ 0x8005;
 398   4                              }
 399   3                              else
 400   3                              {
 401   4                                      wCrc <<= 1;
 402   4                              }
 403   3                      }
 404   2              }
 405   1        //-----------------------------------------------------------------
 406   1        //Write CRC in frame
 407   1        abFrame[bFrameSize_c - 2] = ((BYTE*)&wCrc)[0];
 408   1        abFrame[bFrameSize_c - 1] = ((BYTE*)&wCrc)[1];
 409   1        return;
 410   1      }
 411          
 412            //-------------------------------------------------------------------
 413            //MSB first to LSB first conversion, and inversion if FSK used
 414          void vConvertPacket (BYTE bModType)
 415          {
 416   1        BYTE i,low,high;
 417   1      
 418   1        if (bModType)
 419   1        {
 420   2          bModType = 0xff;
 421   2        }
 422   1        for (i=0;i<(sizeof abFrame);i++)
 423   1        {
 424   2              low = abConvTable[(abFrame[i] & 0xf0) >> 4] & 0x0f;
 425   2              high = abConvTable[abFrame[i] & 0x0f] & 0xf0;
 426   2              abFrame[i] = (high | low) ^ bModType;
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 8   

 427   2        }
 428   1        return;
 429   1      }
 430          
 431          
*** WARNING C291 IN LINE 123 OF keyfob_demo_2_main.c: not every exit path returns a value
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 9   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION L?0071 (BEGIN)
0000 EF                MOV     A,R7
0001 25E0              ADD     A,ACC
0003 FF                MOV     R7,A
0004 D286              SETB    SPI_CLK
             ; FUNCTION spi_delay (BEGIN)
                                           ; SOURCE LINE # 33
                                           ; SOURCE LINE # 34
                                           ; SOURCE LINE # 35
0006 00                NOP     
                                           ; SOURCE LINE # 36
0007 00                NOP     
                                           ; SOURCE LINE # 37
0008 22                RET     
             ; FUNCTION spi_delay (END)

             ; FUNCTION L?0070 (BEGIN)
0000 AF00        R     MOV     R7,addr+03H
0002 AE00        R     MOV     R6,addr+02H
0004 AD00        R     MOV     R5,addr+01H
0006 AC00        R     MOV     R4,addr
0008 120000      E     LCALL   ?C?ULSHR
             ; FUNCTION _spi_write_byte (BEGIN)
                                           ; SOURCE LINE # 42
;---- Variable '_data' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 46
;---- Variable 'i' assigned to Register 'R6' ----
000B E4                CLR     A
000C FE                MOV     R6,A
000D         ?C0002:
000D EE                MOV     A,R6
000E C3                CLR     C
000F 9408              SUBB    A,#08H
0011 7480              MOV     A,#080H
0013 9480              SUBB    A,#080H
0015 5014              JNC     ?C0007
                                           ; SOURCE LINE # 47
                                           ; SOURCE LINE # 48
0017 EF                MOV     A,R7
0018 30E702            JNB     ACC.7,?C0005
001B 8001              SJMP    ?C0006
001D         ?C0005:
001D C3                CLR     C
001E         ?C0006:
001E 9290              MOV     SPI_MOSI,C
                                           ; SOURCE LINE # 49
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 52
0020 120000      R     LCALL   L?0071
                                           ; SOURCE LINE # 53
0023 C286              CLR     SPI_CLK
                                           ; SOURCE LINE # 54
0025 120000      R     LCALL   spi_delay
                                           ; SOURCE LINE # 55
0028 0E                INC     R6
0029 80E2              SJMP    ?C0002
                                           ; SOURCE LINE # 56
002B         ?C0007:
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 10  

002B 22                RET     
             ; FUNCTION _spi_write_byte (END)

             ; FUNCTION spi_read_byte (BEGIN)
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
                                           ; SOURCE LINE # 64
;---- Variable '_data' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
                                           ; SOURCE LINE # 66
;---- Variable 'i' assigned to Register 'R6' ----
0002 FE                MOV     R6,A
0003         ?C0008:
0003 EE                MOV     A,R6
0004 C3                CLR     C
0005 9408              SUBB    A,#08H
0007 7480              MOV     A,#080H
0009 9480              SUBB    A,#080H
000B 5012              JNC     ?C0009
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 71
000D 120000      R     LCALL   L?0071
                                           ; SOURCE LINE # 72
0010 308704            JNB     SPI_MISO,?C0011
                                           ; SOURCE LINE # 73
0013 CF                XCH     A,R7
0014 4401              ORL     A,#01H
0016 CF                XCH     A,R7
0017         ?C0011:
                                           ; SOURCE LINE # 74
0017 C286              CLR     SPI_CLK
                                           ; SOURCE LINE # 75
0019 120000      R     LCALL   spi_delay
                                           ; SOURCE LINE # 76
001C 0E                INC     R6
001D 80E4              SJMP    ?C0008
001F         ?C0009:
                                           ; SOURCE LINE # 77
                                           ; SOURCE LINE # 78
001F 22                RET     
             ; FUNCTION spi_read_byte (END)

             ; FUNCTION _spi_flash_read (BEGIN)
                                           ; SOURCE LINE # 83
0000 8F00        R     MOV     addr+03H,R7
0002 8E00        R     MOV     addr+02H,R6
0004 8D00        R     MOV     addr+01H,R5
0006 8C00        R     MOV     addr,R4
0008 8B00        R     MOV     buf,R3
000A 8A00        R     MOV     buf+01H,R2
000C 8900        R     MOV     buf+02H,R1
                                           ; SOURCE LINE # 84
                                           ; SOURCE LINE # 87
000E C291              CLR     SPI_CS
                                           ; SOURCE LINE # 89
0010 7F03              MOV     R7,#03H
0012 120000      R     LCALL   _spi_write_byte
                                           ; SOURCE LINE # 90
0015 7810              MOV     R0,#010H
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 11  

0017 120000      R     LCALL   L?0070
                                           ; SOURCE LINE # 91
001A 7808              MOV     R0,#08H
001C 120000      R     LCALL   L?0070
                                           ; SOURCE LINE # 92
001F AF00        R     MOV     R7,addr+03H
0021 120000      R     LCALL   _spi_write_byte
                                           ; SOURCE LINE # 94
;---- Variable 'i' assigned to Register 'R5' ----
0024 E4                CLR     A
0025 FD                MOV     R5,A
0026         ?C0013:
0026 ED                MOV     A,R5
0027 C3                CLR     C
0028 9500        R     SUBB    A,len
002A 5015              JNC     ?C0014
                                           ; SOURCE LINE # 95
002C 120000      R     LCALL   spi_read_byte
002F AB00        R     MOV     R3,buf
0031 AA00        R     MOV     R2,buf+01H
0033 A900        R     MOV     R1,buf+02H
0035 8D82              MOV     DPL,R5
0037 758300            MOV     DPH,#00H
003A EF                MOV     A,R7
003B 120000      E     LCALL   ?C?CSTOPTR
003E 0D                INC     R5
003F 80E5              SJMP    ?C0013
0041         ?C0014:
                                           ; SOURCE LINE # 97
0041 D291              SETB    SPI_CS
                                           ; SOURCE LINE # 98
0043 22                RET     
             ; FUNCTION _spi_flash_read (END)

             ; FUNCTION spi_flash_read_freq (BEGIN)
                                           ; SOURCE LINE # 104
                                           ; SOURCE LINE # 105
                                           ; SOURCE LINE # 109
0000 7B00              MOV     R3,#00H
0002 7A00        R     MOV     R2,#HIGH b
0004 7900        R     MOV     R1,#LOW b
0006 750004      R     MOV     ?_spi_flash_read?BYTE+07H,#04H
0009 7F00              MOV     R7,#00H
000B 7E00              MOV     R6,#00H
000D 7D00              MOV     R5,#00H
000F 7C00              MOV     R4,#00H
0011 120000      R     LCALL   _spi_flash_read
                                           ; SOURCE LINE # 115
0014 E500        R     MOV     A,b
0016 FB                MOV     R3,A
0017 7A00              MOV     R2,#00H
0019 6474              XRL     A,#074H
001B 701B              JNZ     ?C0017
001D E500        R     MOV     A,b+01H
001F 64FA              XRL     A,#0FAH
0021 7015              JNZ     ?C0017
0023 E500        R     MOV     A,b+02H
0025 64C4              XRL     A,#0C4H
0027 700F              JNZ     ?C0017
0029 E500        R     MOV     A,b+03H
002B 647A              XRL     A,#07AH
002D 7009              JNZ     ?C0017
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 12  

                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
002F 7F0C              MOV     R7,#0CH
0031 7E04              MOV     R6,#04H
0033 7D97              MOV     R5,#097H
0035 7C4D              MOV     R4,#04DH
0037 22                RET     
                                           ; SOURCE LINE # 118
0038         ?C0017:
                                           ; SOURCE LINE # 119
0038 EB                MOV     A,R3
0039 6474              XRL     A,#074H
003B 4A                ORL     A,R2
003C 701A              JNZ     ?C0018
003E E500        R     MOV     A,b+01H
0040 64FA              XRL     A,#0FAH
0042 7014              JNZ     ?C0018
0044 E500        R     MOV     A,b+02H
0046 64C4              XRL     A,#0C4H
0048 700E              JNZ     ?C0018
004A E500        R     MOV     A,b+03H
004C 647A              XRL     A,#07AH
004E 7008              JNZ     ?C0018
                                           ; SOURCE LINE # 120
0050 7FF5              MOV     R7,#0F5H
0052 7EEF              MOV     R6,#0EFH
0054 7DCE              MOV     R5,#0CEH
0056 7C4D              MOV     R4,#04DH
                                           ; SOURCE LINE # 123
0058         ?C0018:
0058 22                RET     
             ; FUNCTION spi_flash_read_freq (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 133
0000 D2BA              SETB    PDMD
                                           ; SOURCE LINE # 134
0002 53B51F            ANL     PORT_CTRL,#01FH
                                           ; SOURCE LINE # 135
0005 43B580            ORL     PORT_CTRL,#080H
                                           ; SOURCE LINE # 136
0008 53B57F            ANL     PORT_CTRL,#07FH
                                           ; SOURCE LINE # 137
000B C285              CLR     GPIO_LED
                                           ; SOURCE LINE # 139
000D 7F0A              MOV     R7,#0AH
000F 120000      E     LCALL   _vSys_Setup
                                           ; SOURCE LINE # 140
0012 7F00              MOV     R7,#00H
0014 7E00              MOV     R6,#00H
0016 7D00              MOV     R5,#00H
0018 7C00              MOV     R4,#00H
001A 120000      E     LCALL   _vSys_SetMasterTime
                                           ; SOURCE LINE # 141
001D 7F01              MOV     R7,#01H
001F 120000      E     LCALL   _vSys_BandGapLdo
                                           ; SOURCE LINE # 143
0022 E5DA              MOV     A,PROT0_CTRL
0024 5407              ANL     A,#07H
0026 D3                SETB    C
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 13  

0027 9401              SUBB    A,#01H
0029 7480              MOV     A,#080H
002B 9480              SUBB    A,#080H
002D 4009              JC      ?C0021
                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 146
002F E5BE              MOV     A,SYSGEN
0031 5420              ANL     A,#020H
0033 6003              JZ      ?C0021
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
0035 120000      E     LCALL   vSys_FirstPowerUp
                                           ; SOURCE LINE # 149
                                           ; SOURCE LINE # 150
0038         ?C0021:
                                           ; SOURCE LINE # 151
0038 7F03              MOV     R7,#03H
003A 120000      E     LCALL   _vSys_LedIntensity
                                           ; SOURCE LINE # 152
003D 900000      R     MOV     DPTR,#lLEDOnTime
0040 120000      E     LCALL   ?C?LSTKXDATA
0043 00                DB      00H
0044 00                DB      00H
0045 00                DB      00H
0046 14                DB      014H
                                           ; SOURCE LINE # 153
0047 120000      E     LCALL   lSys_GetProdId
004A 900000      R     MOV     DPTR,#lPartID
004D 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 154
0050 E4                CLR     A
0051 F500        R     MOV     bIsr_DebounceCount,A
                                           ; SOURCE LINE # 157
0053 900000      R     MOV     DPTR,#rBsrSetup
0056 741F              MOV     A,#01FH
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 158
0059 A3                INC     DPTR
005A 7400        R     MOV     A,#HIGH abBsrPtsPlaceHolder
005C F0                MOVX    @DPTR,A
005D A3                INC     DPTR
005E 7400        R     MOV     A,#LOW abBsrPtsPlaceHolder
0060 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 159
0061 A3                INC     DPTR
0062 7403              MOV     A,#03H
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 160
0065 A3                INC     DPTR
0066 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 161
0067 7E00        R     MOV     R6,#HIGH rBsrSetup
0069 7F00        R     MOV     R7,#LOW rBsrSetup
006B 120000      E     LCALL   _vBsr_Setup
                                           ; SOURCE LINE # 163
006E 759C27            MOV     RTC_CTRL,#027H
                                           ; SOURCE LINE # 164
0071 439C40            ORL     RTC_CTRL,#040H
                                           ; SOURCE LINE # 165
0074 D2AB              SETB    ERTC
                                           ; SOURCE LINE # 166
0076 D2AF              SETB    EA
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 14  

                                           ; SOURCE LINE # 169
0078 120000      R     LCALL   spi_flash_read_freq
007B 120000      E     LCALL   ?C?CASTF
007E 8F00        R     MOV     fFlashFreqHz+03H,R7
0080 8E00        R     MOV     fFlashFreqHz+02H,R6
0082 8D00        R     MOV     fFlashFreqHz+01H,R5
0084 8C00        R     MOV     fFlashFreqHz,R4
                                           ; SOURCE LINE # 174
0086 E4                CLR     A
0087 120000      E     LCALL   ?C?FCASTL
008A 900000      R     MOV     DPTR,#fDesiredFreqOOK
008D 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 175
0090 AF00        R     MOV     R7,fFlashFreqHz+03H
0092 AE00        R     MOV     R6,fFlashFreqHz+02H
0094 AD00        R     MOV     R5,fFlashFreqHz+01H
0096 AC00        R     MOV     R4,fFlashFreqHz
0098 E4                CLR     A
0099 120000      E     LCALL   ?C?FCASTL
009C 900000      R     MOV     DPTR,#fDesiredFreqFSK
009F 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 177
00A2 900000      R     MOV     DPTR,#bFskDev
00A5 7466              MOV     A,#066H
00A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 180
00A8 900000      R     MOV     DPTR,#rPaSetup+08H
00AB 743C              MOV     A,#03CH
00AD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 181
00AE 900000      R     MOV     DPTR,#rPaSetup+0AH
00B1 7401              MOV     A,#01H
00B3 F0                MOVX    @DPTR,A
00B4 A3                INC     DPTR
00B5 740E              MOV     A,#0EH
00B7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 182
00B8 E4                CLR     A
00B9 900000      R     MOV     DPTR,#rPaSetup+09H
00BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 183
00BD 900000      R     MOV     DPTR,#rPaSetup
00C0 120000      E     LCALL   ?C?LSTKXDATA
00C3 00                DB      00H
00C4 00                DB      00H
00C5 00                DB      00H
00C6 00                DB      00H
                                           ; SOURCE LINE # 184
00C7 900000      R     MOV     DPTR,#rPaSetup+04H
00CA 120000      E     LCALL   ?C?LSTKXDATA
00CD 00                DB      00H
00CE 00                DB      00H
00CF 00                DB      00H
00D0 00                DB      00H
                                           ; SOURCE LINE # 185
00D1 7E00        R     MOV     R6,#HIGH rPaSetup
00D3 7F00        R     MOV     R7,#LOW rPaSetup
00D5 120000      E     LCALL   _vPa_Setup
                                           ; SOURCE LINE # 193
00D8 900000      R     MOV     DPTR,#rOdsSetup
00DB 7401              MOV     A,#01H
00DD F0                MOVX    @DPTR,A
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 15  

                                           ; SOURCE LINE # 194
00DE E4                CLR     A
00DF FD                MOV     R5,A
00E0 FC                MOV     R4,A
00E1 FF                MOV     R7,A
00E2 120000      E     LCALL   _vStl_EncodeSetup
                                           ; SOURCE LINE # 195
00E5 900000      R     MOV     DPTR,#fDesiredFreqFSK
00E8 E0                MOVX    A,@DPTR
00E9 FC                MOV     R4,A
00EA A3                INC     DPTR
00EB E0                MOVX    A,@DPTR
00EC FD                MOV     R5,A
00ED A3                INC     DPTR
00EE E0                MOVX    A,@DPTR
00EF FE                MOV     R6,A
00F0 A3                INC     DPTR
00F1 E0                MOVX    A,@DPTR
00F2 FF                MOV     R7,A
00F3 900000      R     MOV     DPTR,#fDesiredFreq
00F6 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 196
00F9 7500AA      R     MOV     bPreamble,#0AAH
                                           ; SOURCE LINE # 199
00FC 900000      R     MOV     DPTR,#rOdsSetup+03H
00FF 7407              MOV     A,#07H
0101 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 200
0102 900000      R     MOV     DPTR,#rOdsSetup+01H
0105 7405              MOV     A,#05H
0107 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 201
0108 E4                CLR     A
0109 A3                INC     DPTR
010A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 202
010B 900000      R     MOV     DPTR,#rOdsSetup+06H
010E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 203
010F A3                INC     DPTR
0110 7405              MOV     A,#05H
0112 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 204
0113 A3                INC     DPTR
0114 14                DEC     A
0115 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 205
0116 900000      R     MOV     DPTR,#rOdsSetup+04H
0119 7401              MOV     A,#01H
011B F0                MOVX    @DPTR,A
011C A3                INC     DPTR
011D 74A1              MOV     A,#0A1H
011F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 206
0120 7E00        R     MOV     R6,#HIGH rOdsSetup
0122 7F00        R     MOV     R7,#LOW rOdsSetup
0124 120000      E     LCALL   _vOds_Setup
                                           ; SOURCE LINE # 208
0127 120000      E     LCALL   vFCast_Setup
                                           ; SOURCE LINE # 210
012A 7F64              MOV     R7,#064H
012C 120000      E     LCALL   _iMVdd_Measure
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 16  

012F 8E00        R     MOV     iBatteryMv,R6
0131 8F00        R     MOV     iBatteryMv+01H,R7
                                           ; SOURCE LINE # 211
0133 C3                CLR     C
0134 E500        R     MOV     A,iBatteryMv+01H
0136 94C4              SUBB    A,#0C4H
0138 E500        R     MOV     A,iBatteryMv
013A 6480              XRL     A,#080H
013C 9489              SUBB    A,#089H
013E 5005              JNC     ?C0023
                                           ; SOURCE LINE # 212
                                           ; SOURCE LINE # 213
0140 E4                CLR     A
0141 F500        R     MOV     bBatStatus,A
                                           ; SOURCE LINE # 214
0143 8003              SJMP    ?C0024
0145         ?C0023:
                                           ; SOURCE LINE # 216
                                           ; SOURCE LINE # 217
0145 750001      R     MOV     bBatStatus,#01H
                                           ; SOURCE LINE # 218
0148         ?C0024:
                                           ; SOURCE LINE # 219
0148 7F03              MOV     R7,#03H
014A 120000      E     LCALL   _vDmdTs_RunForTemp
014D         ?C0025:
                                           ; SOURCE LINE # 220
014D 120000      E     LCALL   bDmdTs_GetSamplesTaken
0150 EF                MOV     A,R7
0151 60FA              JZ      ?C0025
                                           ; SOURCE LINE # 221
                                           ; SOURCE LINE # 223
0153         ?C0027:
                                           ; SOURCE LINE # 226
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
0153 120000      R     LCALL   vButtonCheck
                                           ; SOURCE LINE # 229
0156 D284              SETB    MY_LED
                                           ; SOURCE LINE # 231
0158 900000      R     MOV     DPTR,#bButtonState
015B E0                MOVX    A,@DPTR
015C 600D              JZ      ?C0029
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
015E C284              CLR     MY_LED
                                           ; SOURCE LINE # 234
0160 900000      R     MOV     DPTR,#bRepeatCount
0163 7403              MOV     A,#03H
0165 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 235
0166 120000      R     LCALL   vRepeatTxLoop
                                           ; SOURCE LINE # 236
0169 80E8              SJMP    ?C0027
016B         ?C0029:
                                           ; SOURCE LINE # 237
016B 120000      E     LCALL   lSys_GetMasterTime
016E 7805              MOV     R0,#05H
0170 120000      E     LCALL   ?C?ULSHR
0173 E4                CLR     A
0174 7B32              MOV     R3,#032H
0176 FA                MOV     R2,A
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 17  

0177 F9                MOV     R1,A
0178 F8                MOV     R0,A
0179 C3                CLR     C
017A 120000      E     LCALL   ?C?ULCMP
017D 50D4              JNC     ?C0027
                                           ; SOURCE LINE # 238
                                           ; SOURCE LINE # 239
017F E5DA              MOV     A,PROT0_CTRL
0181 5407              ANL     A,#07H
0183 9401              SUBB    A,#01H
0185 7480              MOV     A,#080H
0187 9480              SUBB    A,#080H
0189 40C8              JC      ?C0027
                                           ; SOURCE LINE # 240
                                           ; SOURCE LINE # 242
018B C2AF              CLR     EA
                                           ; SOURCE LINE # 250
018D 120000      E     LCALL   vSys_Shutdown
                                           ; SOURCE LINE # 251
                                           ; SOURCE LINE # 252
                                           ; SOURCE LINE # 253
0190 80C1              SJMP    ?C0027
             ; FUNCTION main (END)

             ; FUNCTION vRepeatTxLoop (BEGIN)
                                           ; SOURCE LINE # 259
                                           ; SOURCE LINE # 261
                                           ; SOURCE LINE # 263
0000 900000      R     MOV     DPTR,#fDesiredFreq
0003 E0                MOVX    A,@DPTR
0004 FC                MOV     R4,A
0005 A3                INC     DPTR
0006 E0                MOVX    A,@DPTR
0007 FD                MOV     R5,A
0008 A3                INC     DPTR
0009 E0                MOVX    A,@DPTR
000A FE                MOV     R6,A
000B A3                INC     DPTR
000C E0                MOVX    A,@DPTR
000D FF                MOV     R7,A
000E 120000      E     LCALL   _vFCast_Tune
                                           ; SOURCE LINE # 264
0011 900000      R     MOV     DPTR,#rOdsSetup
0014 E0                MOVX    A,@DPTR
0015 6401              XRL     A,#01H
0017 7008              JNZ     ?C0035
                                           ; SOURCE LINE # 265
                                           ; SOURCE LINE # 266
0019 900000      R     MOV     DPTR,#bFskDev
001C E0                MOVX    A,@DPTR
001D FF                MOV     R7,A
001E 120000      E     LCALL   _vFCast_FskAdj
                                           ; SOURCE LINE # 267
0021         ?C0035:
                                           ; SOURCE LINE # 269
0021 120000      E     LCALL   bDmdTs_GetSamplesTaken
0024 EF                MOV     A,R7
0025 60FA              JZ      ?C0035
                                           ; SOURCE LINE # 270
                                           ; SOURCE LINE # 272
                                           ; SOURCE LINE # 274
0027 120000      E     LCALL   iDmdTs_GetLatestTemp
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 18  

002A 120000      E     LCALL   _vPa_Tune
                                           ; SOURCE LINE # 275
002D 120000      R     LCALL   vPacketAssemble
                                           ; SOURCE LINE # 277
0030 900000      R     MOV     DPTR,#rOdsSetup
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _vConvertPacket
                                           ; SOURCE LINE # 278
0038 120000      E     LCALL   vStl_PreLoop
003B         ?C0039:
                                           ; SOURCE LINE # 280
                                           ; SOURCE LINE # 282
003B 120000      E     LCALL   lSys_GetMasterTime
003E 8F00        R     MOV     lTimestamp+03H,R7
0040 8E00        R     MOV     lTimestamp+02H,R6
0042 8D00        R     MOV     lTimestamp+01H,R5
0044 8C00        R     MOV     lTimestamp,R4
                                           ; SOURCE LINE # 284
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 288
0046         ?C0041:
                                           ; SOURCE LINE # 289
0046 120000      E     LCALL   lSys_GetMasterTime
0049 C3                CLR     C
004A EF                MOV     A,R7
004B 9500        R     SUBB    A,lTimestamp+03H
004D FF                MOV     R7,A
004E EE                MOV     A,R6
004F 9500        R     SUBB    A,lTimestamp+02H
0051 FE                MOV     R6,A
0052 ED                MOV     A,R5
0053 9500        R     SUBB    A,lTimestamp+01H
0055 FD                MOV     R5,A
0056 EC                MOV     A,R4
0057 9500        R     SUBB    A,lTimestamp
0059 FC                MOV     R4,A
005A 900000      R     MOV     DPTR,#lLEDOnTime
005D E0                MOVX    A,@DPTR
005E F8                MOV     R0,A
005F A3                INC     DPTR
0060 E0                MOVX    A,@DPTR
0061 F9                MOV     R1,A
0062 A3                INC     DPTR
0063 E0                MOVX    A,@DPTR
0064 FA                MOV     R2,A
0065 A3                INC     DPTR
0066 E0                MOVX    A,@DPTR
0067 FB                MOV     R3,A
0068 D3                SETB    C
0069 120000      E     LCALL   ?C?ULCMP
006C 50D8              JNC     ?C0041
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 292
                                           ; SOURCE LINE # 295
006E 900000      R     MOV     DPTR,#bFrameSize
0071 E0                MOVX    A,@DPTR
0072 FD                MOV     R5,A
0073 AF00        R     MOV     R7,pbFrameHead+01H
0075 AE00        R     MOV     R6,pbFrameHead
0077 120000      E     LCALL   _vStl_SingleTxLoop
007A         ?C0043:
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 19  

                                           ; SOURCE LINE # 297
007A 120000      E     LCALL   lSys_GetMasterTime
007D C3                CLR     C
007E EF                MOV     A,R7
007F 9500        R     SUBB    A,lTimestamp+03H
0081 FF                MOV     R7,A
0082 EE                MOV     A,R6
0083 9500        R     SUBB    A,lTimestamp+02H
0085 FE                MOV     R6,A
0086 ED                MOV     A,R5
0087 9500        R     SUBB    A,lTimestamp+01H
0089 FD                MOV     R5,A
008A EC                MOV     A,R4
008B 9500        R     SUBB    A,lTimestamp
008D FC                MOV     R4,A
008E E4                CLR     A
008F 7B64              MOV     R3,#064H
0091 FA                MOV     R2,A
0092 F9                MOV     R1,A
0093 F8                MOV     R0,A
0094 D3                SETB    C
0095 120000      E     LCALL   ?C?ULCMP
0098 50E0              JNC     ?C0043
                                           ; SOURCE LINE # 299
009A 900000      R     MOV     DPTR,#bRepeatCount
009D E0                MOVX    A,@DPTR
009E 14                DEC     A
009F F0                MOVX    @DPTR,A
00A0 7099              JNZ     ?C0039
                                           ; SOURCE LINE # 301
00A2 120000      E     LCALL   vStl_PostLoop
                                           ; SOURCE LINE # 304
00A5 7F00              MOV     R7,#00H
00A7 7E00              MOV     R6,#00H
00A9 7D00              MOV     R5,#00H
00AB 7C00              MOV     R4,#00H
00AD 020000      E     LJMP    _vSys_SetMasterTime
             ; FUNCTION vRepeatTxLoop (END)

             ; FUNCTION isr_rtc (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D008            MOV     PSW,#08H
                                           ; SOURCE LINE # 309
                                           ; SOURCE LINE # 311
000D 539C7F            ANL     RTC_CTRL,#07FH
                                           ; SOURCE LINE # 312
0010 7F05              MOV     R7,#05H
0012 120000      E     LCALL   _vSys_IncMasterTime
                                           ; SOURCE LINE # 313
0015 0500        R     INC     bIsr_DebounceCount
                                           ; SOURCE LINE # 314
0017 E500        R     MOV     A,bIsr_DebounceCount
0019 5401              ANL     A,#01H
001B 7003              JNZ     ?C0047
                                           ; SOURCE LINE # 315
                                           ; SOURCE LINE # 316
001D 120000      E     LCALL   vBsr_Service
                                           ; SOURCE LINE # 317
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 20  

                                           ; SOURCE LINE # 319
0020         ?C0047:
0020 D0D0              POP     PSW
0022 D082              POP     DPL
0024 D083              POP     DPH
0026 D0F0              POP     B
0028 D0E0              POP     ACC
002A 32                RETI    
             ; FUNCTION isr_rtc (END)

             ; FUNCTION vButtonCheck (BEGIN)
                                           ; SOURCE LINE # 324
                                           ; SOURCE LINE # 325
                                           ; SOURCE LINE # 326
0000 C2AB              CLR     ERTC
                                           ; SOURCE LINE # 327
0002 E4                CLR     A
0003 900000      R     MOV     DPTR,#bButtonState
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 329
0007 120000      E     LCALL   bBsr_GetPtsItemCnt
000A EF                MOV     A,R7
000B 6019              JZ      ?C0048
                                           ; SOURCE LINE # 330
                                           ; SOURCE LINE # 331
000D 120000      E     LCALL   wBsr_Pop
0010 EF                MOV     A,R7
0011 900000      R     MOV     DPTR,#bButtonState
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 333
0015 E500        R     MOV     A,bPrevBtn
0017 6007              JZ      ?C0049
                                           ; SOURCE LINE # 334
                                           ; SOURCE LINE # 335
0019 E0                MOVX    A,@DPTR
001A F500        R     MOV     bPrevBtn,A
                                           ; SOURCE LINE # 336
001C E4                CLR     A
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 337
001E 8006              SJMP    ?C0048
0020         ?C0049:
                                           ; SOURCE LINE # 339
                                           ; SOURCE LINE # 340
0020 900000      R     MOV     DPTR,#bButtonState
0023 E0                MOVX    A,@DPTR
0024 F500        R     MOV     bPrevBtn,A
                                           ; SOURCE LINE # 341
                                           ; SOURCE LINE # 342
0026         ?C0048:
                                           ; SOURCE LINE # 344
0026 D2AB              SETB    ERTC
                                           ; SOURCE LINE # 346
0028 22                RET     
             ; FUNCTION vButtonCheck (END)

             ; FUNCTION vPacketAssemble (BEGIN)
                                           ; SOURCE LINE # 347
                                           ; SOURCE LINE # 348
                                           ; SOURCE LINE # 351
0000 750000      R     MOV     pbFrameHead,#HIGH abFrame
0003 750000      R     MOV     pbFrameHead+01H,#LOW abFrame
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 21  

                                           ; SOURCE LINE # 352
0006 900000      R     MOV     DPTR,#bFrameSize
0009 7418              MOV     A,#018H
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 355
;---- Variable 'i' assigned to Register 'R7' ----
000C E4                CLR     A
000D FF                MOV     R7,A
000E         ?C0052:
000E EF                MOV     A,R7
000F C3                CLR     C
0010 940D              SUBB    A,#0DH
0012 7480              MOV     A,#080H
0014 9480              SUBB    A,#080H
0016 5010              JNC     ?C0053
                                           ; SOURCE LINE # 356
                                           ; SOURCE LINE # 357
0018 7400        R     MOV     A,#LOW abFrame
001A 2F                ADD     A,R7
001B F582              MOV     DPL,A
001D E4                CLR     A
001E 3400        R     ADDC    A,#HIGH abFrame
0020 F583              MOV     DPH,A
0022 E500        R     MOV     A,bPreamble
0024 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 358
0025 0F                INC     R7
0026 80E6              SJMP    ?C0052
0028         ?C0053:
                                           ; SOURCE LINE # 360
0028 5300E0      R     ANL     bStatus,#0E0H
                                           ; SOURCE LINE # 362
002B 900000      R     MOV     DPTR,#bButtonState
002E E0                MOVX    A,@DPTR
002F 541F              ANL     A,#01FH
0031 4200        R     ORL     bStatus,A
                                           ; SOURCE LINE # 364
0033 900000      R     MOV     DPTR,#abFrame+0DH
0036 742D              MOV     A,#02DH
0038 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 365
0039 A3                INC     DPTR
003A 74D4              MOV     A,#0D4H
003C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 366
003D 900000      R     MOV     DPTR,#lPartID
0040 E0                MOVX    A,@DPTR
0041 900000      R     MOV     DPTR,#abFrame+0FH
0044 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 367
0045 900000      R     MOV     DPTR,#lPartID+01H
0048 E0                MOVX    A,@DPTR
0049 900000      R     MOV     DPTR,#abFrame+010H
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 368
004D 900000      R     MOV     DPTR,#lPartID+02H
0050 E0                MOVX    A,@DPTR
0051 900000      R     MOV     DPTR,#abFrame+011H
0054 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 369
0055 900000      R     MOV     DPTR,#lPartID+03H
0058 E0                MOVX    A,@DPTR
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 22  

0059 900000      R     MOV     DPTR,#abFrame+012H
005C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 370
005D A3                INC     DPTR
005E E500        R     MOV     A,bStatus
0060 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 371
0061 A3                INC     DPTR
0062 E500        R     MOV     A,iBatteryMv
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
0065 A3                INC     DPTR
0066 E500        R     MOV     A,iBatteryMv+01H
0068 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 373
0069 E4                CLR     A
006A A3                INC     DPTR
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 374
006C A3                INC     DPTR
006D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 376
006E 020000      R     LJMP    vCalculateCrc
             ; FUNCTION vPacketAssemble (END)

             ; FUNCTION vCalculateCrc (BEGIN)
                                           ; SOURCE LINE # 384
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 388
0000 74FF              MOV     A,#0FFH
0002 F500        R     MOV     wCrc,A
0004 F500        R     MOV     wCrc+01H,A
                                           ; SOURCE LINE # 389
;---- Variable 'j' assigned to Register 'R5' ----
0006 7D0F              MOV     R5,#0FH
0008         ?C0056:
0008 ED                MOV     A,R5
0009 C3                CLR     C
000A 9416              SUBB    A,#016H
000C 7480              MOV     A,#080H
000E 9480              SUBB    A,#080H
0010 503D              JNC     ?C0057
                                           ; SOURCE LINE # 390
                                           ; SOURCE LINE # 391
0012 7400        R     MOV     A,#LOW abFrame
0014 2D                ADD     A,R5
0015 F582              MOV     DPL,A
0017 E4                CLR     A
0018 3400        R     ADDC    A,#HIGH abFrame
001A F583              MOV     DPH,A
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 6200        R     XRL     wCrc,A
                                           ; SOURCE LINE # 393
;---- Variable 'i' assigned to Register 'R4' ----
0021 7C08              MOV     R4,#08H
0023         ?C0059:
0023 EC                MOV     A,R4
0024 6026              JZ      ?C0058
                                           ; SOURCE LINE # 394
                                           ; SOURCE LINE # 395
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 23  

0026 E500        R     MOV     A,wCrc
0028 30E713            JNB     ACC.7,?C0062
                                           ; SOURCE LINE # 396
                                           ; SOURCE LINE # 397
002B E500        R     MOV     A,wCrc+01H
002D 25E0              ADD     A,ACC
002F FF                MOV     R7,A
0030 E500        R     MOV     A,wCrc
0032 33                RLC     A
0033 6480              XRL     A,#080H
0035 F500        R     MOV     wCrc,A
0037 EF                MOV     A,R7
0038 6405              XRL     A,#05H
003A F500        R     MOV     wCrc+01H,A
                                           ; SOURCE LINE # 398
003C 800B              SJMP    ?C0061
003E         ?C0062:
                                           ; SOURCE LINE # 400
                                           ; SOURCE LINE # 401
003E E500        R     MOV     A,wCrc+01H
0040 25E0              ADD     A,ACC
0042 F500        R     MOV     wCrc+01H,A
0044 E500        R     MOV     A,wCrc
0046 33                RLC     A
0047 F500        R     MOV     wCrc,A
                                           ; SOURCE LINE # 402
                                           ; SOURCE LINE # 403
0049         ?C0061:
0049 1C                DEC     R4
004A 80D7              SJMP    ?C0059
                                           ; SOURCE LINE # 404
004C         ?C0058:
004C 0D                INC     R5
004D 80B9              SJMP    ?C0056
004F         ?C0057:
                                           ; SOURCE LINE # 407
004F 900000      R     MOV     DPTR,#abFrame+016H
0052 E500        R     MOV     A,wCrc
0054 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 408
0055 A3                INC     DPTR
0056 E500        R     MOV     A,wCrc+01H
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 410
0059 22                RET     
             ; FUNCTION vCalculateCrc (END)

             ; FUNCTION _vConvertPacket (BEGIN)
                                           ; SOURCE LINE # 414
;---- Variable 'bModType' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 415
                                           ; SOURCE LINE # 418
0000 EF                MOV     A,R7
0001 6002              JZ      ?C0065
                                           ; SOURCE LINE # 419
                                           ; SOURCE LINE # 420
0003 7FFF              MOV     R7,#0FFH
                                           ; SOURCE LINE # 421
0005         ?C0065:
                                           ; SOURCE LINE # 422
;---- Variable 'i' assigned to Register 'R6' ----
0005 E4                CLR     A
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 24  

0006 FE                MOV     R6,A
0007         ?C0066:
0007 EE                MOV     A,R6
0008 C3                CLR     C
0009 9418              SUBB    A,#018H
000B 7480              MOV     A,#080H
000D 9480              SUBB    A,#080H
000F 5031              JNC     ?C0069
                                           ; SOURCE LINE # 423
                                           ; SOURCE LINE # 424
0011 7400        R     MOV     A,#LOW abFrame
0013 2E                ADD     A,R6
0014 F582              MOV     DPL,A
0016 E4                CLR     A
0017 3400        R     ADDC    A,#HIGH abFrame
0019 F583              MOV     DPH,A
001B E0                MOVX    A,@DPTR
001C FD                MOV     R5,A
001D 54F0              ANL     A,#0F0H
001F C4                SWAP    A
0020 540F              ANL     A,#0FH
0022 900000      R     MOV     DPTR,#abConvTable
0025 93                MOVC    A,@A+DPTR
0026 540F              ANL     A,#0FH
0028 FC                MOV     R4,A
;---- Variable 'low' assigned to Register 'R4' ----
                                           ; SOURCE LINE # 425
0029 ED                MOV     A,R5
002A 540F              ANL     A,#0FH
002C 93                MOVC    A,@A+DPTR
002D 54F0              ANL     A,#0F0H
002F FD                MOV     R5,A
;---- Variable 'high' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 426
0030 4C                ORL     A,R4
0031 6F                XRL     A,R7
0032 FB                MOV     R3,A
0033 7400        R     MOV     A,#LOW abFrame
0035 2E                ADD     A,R6
0036 F582              MOV     DPL,A
0038 E4                CLR     A
0039 3400        R     ADDC    A,#HIGH abFrame
003B F583              MOV     DPH,A
003D EB                MOV     A,R3
003E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 427
003F 0E                INC     R6
0040 80C5              SJMP    ?C0066
                                           ; SOURCE LINE # 429
0042         ?C0069:
0042 22                RET     
             ; FUNCTION _vConvertPacket (END)

C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 25  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


bBsr_GetPtsItemCnt . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
RTC_CTRL . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   009CH  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
bBatStatus . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0000H  1
vPacketAssemble. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
tFCast_XoSetup . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  5
  fXoFreq. . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0000H  4
  bLowCap. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0004H  1
tBsr_PtsElement. . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  2
  bButtonVector. . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  bTimestamp . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
SPI_MISO . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0087H  1
SPI_MOSI . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0090H  1
LWORD. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4
iBatteryMv . . . . . . . . . . . . . .  PUBLIC   DATA   INT      0001H  2
_iMVdd_Measure . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
PROT0_CTRL . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00DAH  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
bPreamble. . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0003H  1
tOds_Setup . . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  9
  bModulationType. . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  bClkDiv. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  bEdgeRate. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  bGroupWidth. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  wBitRate . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0004H  2
  bLcWarmInt . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0006H  1
  bDivWarmInt. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0007H  1
  bPaWarmInt . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0008H  1
tBsr_Setup . . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  5
  bButtonMask. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  pbPtsReserveHead . . . . . . . . . .  MEMBER   -----  PTR      0001H  2
  bPtsSize . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  bPushQualThresh. . . . . . . . . . .  MEMBER   -----  U_CHAR   0004H  1
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
lLEDOnTime . . . . . . . . . . . . . .  PUBLIC   XDATA  U_LONG   0000H  4
_vOds_Setup. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
lPartID. . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_LONG   0004H  4
_vBsr_Setup. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
bDmdTs_GetSamplesTaken . . . . . . . .  EXTERN   CODE   PROC     -----  -----
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
tPa_Setup. . . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  12
  fAlpha . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0000H  4
  fBeta. . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0004H  4
  bLevel . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0008H  1
  bMaxDrv. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0009H  1
  wNominalCap. . . . . . . . . . . . .  MEMBER   -----  U_INT    000AH  2
_vPa_Setup . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
CHAR . . . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
i8 . . . . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
fDesiredFreqFSK. . . . . . . . . . . .  PUBLIC   XDATA  FLOAT    0008H  4
vCalculateCrc. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0004H  1
  j. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0005H  1
  wCrc . . . . . . . . . . . . . . . .  AUTO     DATA   U_INT    0000H  2
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 26  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


PDMD . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BAH  1
main . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  fFlashFreqHz . . . . . . . . . . . .  AUTO     DATA   U_LONG   0000H  4
fDesiredFreqOOK. . . . . . . . . . . .  PUBLIC   XDATA  FLOAT    000CH  4
lTimestamp . . . . . . . . . . . . . .  PUBLIC   DATA   U_LONG   0004H  4
_vPa_Tune. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
SPI_CLK. . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0086H  1
bPrevBtn . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0000H  1
bFskDev. . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0010H  1
bIsr_DebounceCount . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0008H  1
_vSys_Setup. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
u8 . . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
rOdsSetup. . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0011H  9
_vDmdTs_RunForTemp . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
ERTC . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ABH  1
rBsrSetup. . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   001AH  5
wBsr_Pop . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
abFrame. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    001FH  24
lSys_GetMasterTime . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
BYTE . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
pbFrameHead. . . . . . . . . . . . . .  PUBLIC   DATA   PTR      0009H  2
_vSys_IncMasterTime. . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
rPaSetup . . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0037H  12
_vConvertPacket. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  bModType . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0006H  1
  low. . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0004H  1
  high . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0005H  1
fDesiredFreq . . . . . . . . . . . . .  PUBLIC   XDATA  FLOAT    0043H  4
WORD . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_spi_flash_read. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  addr . . . . . . . . . . . . . . . .  AUTO     DATA   U_LONG   0000H  4
  buf. . . . . . . . . . . . . . . . .  AUTO     DATA   PTR      0004H  3
  len. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0007H  1
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0005H  1
vFCast_Setup . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
spi_delay. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0006H  -----
vRepeatTxLoop. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
abConvTable. . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0000H  16
_vSys_SetMasterTime. . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_vFCast_Tune . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_vSys_BandGapLdo . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
i32. . . . . . . . . . . . . . . . . .  TYPEDEF  -----  LONG     -----  4
spi_flash_read_freq. . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  b. . . . . . . . . . . . . . . . . .  AUTO     DATA   ARRAY    0000H  4
rXoSetup . . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0047H  5
i16. . . . . . . . . . . . . . . . . .  TYPEDEF  -----  INT      -----  2
vStl_PostLoop. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
vStl_PreLoop . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
bRepeatCount . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   004CH  1
iDmdTs_GetLatestTemp . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
vBsr_Service . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
vButtonCheck . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
u32. . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4
SYSGEN . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BEH  1
MY_LED . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0084H  1
_vStl_SingleTxLoop . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
C51 COMPILER V9.59.0.0   KEYFOB_DEMO_2_MAIN                                                01/27/2026 01:57:46 PAGE 27  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


u16. . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
TMR2CTRL . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
PORT_CTRL. . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B5H  1
wPacketCount . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    000BH  2
_vFCast_FskAdj . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
spi_read_byte. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0006H  1
  _data. . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
SPI_CS . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0091H  1
GPIO_LED . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0085H  1
bButtonState . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   004DH  1
bStatus. . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   000DH  1
wchar_t. . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
bFrameSize . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   004EH  1
abBsrPtsPlaceHolder. . . . . . . . . .  PUBLIC   XDATA  ARRAY    004FH  6
_vStl_EncodeSetup. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_spi_write_byte. . . . . . . . . . . .  PUBLIC   CODE   PROC     000BH  -----
  _data. . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0006H  1
lSys_GetProdId . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
vSys_Shutdown. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
isr_rtc. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
vSys_FirstPowerUp. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
_vSys_LedIntensity . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1174    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =     85    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     15      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
